@inject NavigationManager NavigationManager
@inject IProductService ProductService

<MudTextField 
    @bind-Value="@searchText"
    DebounceInterval="500" 
    OnDebounceIntervalElapsed="HandleIntervalElapsed"
    Label="Search" 
    Variant="Variant.Outlined" 
    Adornment="Adornment.End" 
    AdornmentIcon="@Icons.Filled.Search" 
    AdornmentColor="Color.Secondary" />

@code {
    private string searchText = string.Empty;

    public void SearchProducts()
    {
        NavigationManager.NavigateTo($"search/{searchText}");
    }

    void HandleIntervalElapsed(string debouncedText)
    {
        SearchProducts();
        if (String.IsNullOrWhiteSpace(debouncedText))
        {
            NavigationManager.NavigateTo($"/");
        }
    }
}